# UFOÂ³ Galaxy - å¢å¼ºç‰ˆ NLU v2.0 å¿«é€Ÿå¼€å§‹

## ğŸš€ 5 åˆ†é’Ÿå¿«é€Ÿä½“éªŒ

### æ­¥éª¤ 1ï¼šæ‹‰å–æœ€æ–°ä»£ç 

```bash
cd E:\ufo-galaxy
git pull origin master
```

---

### æ­¥éª¤ 2ï¼šå®‰è£…ä¾èµ–

```bash
cd galaxy_gateway

# å®‰è£… Python ä¾èµ–
pip install fastapi uvicorn aiohttp websockets pydantic
```

---

### æ­¥éª¤ 3ï¼šå¯åŠ¨ Ollamaï¼ˆæœ¬åœ° LLMï¼‰

**Windowsï¼š**

1. ä¸‹è½½ Ollamaï¼šhttps://ollama.com/download/windows
2. å®‰è£…åï¼Œæ‰“å¼€å‘½ä»¤è¡Œï¼š

```bash
# å¯åŠ¨ Ollama æœåŠ¡ï¼ˆä¼šè‡ªåŠ¨åå°è¿è¡Œï¼‰
ollama serve

# ä¸‹è½½ Qwen2.5 æ¨¡å‹ï¼ˆçº¦ 4.7GBï¼‰
ollama pull qwen2.5:7b
```

---

### æ­¥éª¤ 4ï¼šå¯åŠ¨ Galaxy Gateway v2.0

```bash
cd E:\ufo-galaxy\galaxy_gateway

# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆWindows PowerShellï¼‰
$env:LLM_PROVIDER="ollama"
$env:LLM_API_BASE="http://localhost:11434"

# å¯åŠ¨ Gateway
python gateway_service_v2.py
```

**å¯åŠ¨æˆåŠŸåï¼Œæ‚¨ä¼šçœ‹åˆ°ï¼š**
```
======================================================================
UFOÂ³ Galaxy Gateway v2.0
======================================================================
å¯åŠ¨æ—¶é—´: 2026-01-22 10:00:00
LLM æä¾›å•†: ollama
è®¾å¤‡æ•°é‡: 4
======================================================================
INFO:     Uvicorn running on http://0.0.0.0:8000
```

---

### æ­¥éª¤ 5ï¼šæµ‹è¯• NLU

**æ‰“å¼€æ–°çš„å‘½ä»¤è¡Œçª—å£ï¼š**

```bash
cd E:\ufo-galaxy\galaxy_gateway

# è¿è¡Œæµ‹è¯•
python test_nlu_v2.py
```

**æˆ–è€…ä½¿ç”¨ HTTP API æµ‹è¯•ï¼š**

```bash
# æµ‹è¯•åŸºç¡€æŒ‡ä»¤
curl -X POST http://localhost:8000/api/test/nlu ^
  -H "Content-Type: application/json" ^
  -d "{\"user_input\": \"åœ¨æ‰‹æœºBä¸Šæ‰“å¼€å¾®ä¿¡\"}"

# æµ‹è¯•å¤æ‚æŒ‡ä»¤
curl -X POST http://localhost:8000/api/test/nlu ^
  -H "Content-Type: application/json" ^
  -d "{\"user_input\": \"åœ¨æ‰‹æœºAä¸Šæ‰“å¼€å¾®ä¿¡ï¼Œåœ¨å¹³æ¿ä¸Šæ’­æ”¾éŸ³ä¹ï¼Œåœ¨ç”µè„‘ä¸Šæ‰“å¼€Chrome\"}"
```

---

## ğŸ¯ æµ‹è¯•ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šå•è®¾å¤‡æ“ä½œ

**è¾“å…¥ï¼š**
```
åœ¨æ‰‹æœºBä¸Šæ‰“å¼€å¾®ä¿¡
```

**é¢„æœŸè¾“å‡ºï¼š**
```json
{
  "success": true,
  "confidence": 0.95,
  "method": "rule",
  "processing_time": 0.023,
  "tasks": [
    {
      "task_id": "task_1",
      "device_id": "phone_b",
      "intent_type": "app_control",
      "action": "open",
      "target": "wechat",
      "confidence": 0.95
    }
  ]
}
```

---

### ç¤ºä¾‹ 2ï¼šå¤šè®¾å¤‡å¹¶è¡Œ

**è¾“å…¥ï¼š**
```
åœ¨æ‰‹æœºAä¸Šæ‰“å¼€å¾®ä¿¡ï¼Œåœ¨å¹³æ¿ä¸Šæ’­æ”¾éŸ³ä¹ï¼Œåœ¨ç”µè„‘ä¸Šæ‰“å¼€Chrome
```

**é¢„æœŸè¾“å‡ºï¼š**
```json
{
  "success": true,
  "confidence": 0.92,
  "method": "llm",
  "processing_time": 0.856,
  "tasks": [
    {
      "task_id": "task_1",
      "device_id": "phone_a",
      "action": "open",
      "target": "wechat"
    },
    {
      "task_id": "task_2",
      "device_id": "tablet",
      "action": "play",
      "target": "music"
    },
    {
      "task_id": "task_3",
      "device_id": "pc",
      "action": "open",
      "target": "chrome"
    }
  ]
}
```

---

### ç¤ºä¾‹ 3ï¼šå¤æ‚ä»»åŠ¡åˆ†è§£

**è¾“å…¥ï¼š**
```
æŠŠæ‰‹æœºAä¸Šçš„ç…§ç‰‡å‘åˆ°ç”µè„‘ï¼Œç„¶åç”¨PSæ‰“å¼€
```

**é¢„æœŸè¾“å‡ºï¼š**
```json
{
  "success": true,
  "confidence": 0.88,
  "method": "llm",
  "processing_time": 1.234,
  "tasks": [
    {
      "task_id": "task_1_read",
      "device_id": "phone_a",
      "action": "read_file",
      "depends_on": []
    },
    {
      "task_id": "task_2_write",
      "device_id": "pc",
      "action": "write_file",
      "depends_on": ["task_1_read"]
    },
    {
      "task_id": "task_3_open",
      "device_id": "pc",
      "action": "open_file_with_app",
      "target": "photoshop",
      "depends_on": ["task_2_write"]
    }
  ]
}
```

---

## ğŸ“Š æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•å®Œæˆåï¼Œä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š

1. **æ–‡æœ¬æŠ¥å‘Šï¼š** `nlu_test_report_YYYYMMDD_HHMMSS.txt`
2. **JSON ç»“æœï¼š** `nlu_test_results_YYYYMMDD_HHMMSS.json`

**æŸ¥çœ‹æŠ¥å‘Šï¼š**

```bash
# æŸ¥çœ‹æœ€æ–°çš„æµ‹è¯•æŠ¥å‘Š
type nlu_test_report_*.txt
```

**ç¤ºä¾‹æŠ¥å‘Šï¼š**

```
======================================================================
UFOÂ³ Galaxy - NLU v2.0 æµ‹è¯•æŠ¥å‘Š
======================================================================
æµ‹è¯•æ—¶é—´: 2026-01-22 10:30:00

æµ‹è¯•æ±‡æ€»:
----------------------------------------------------------------------

è§„åˆ™å¼•æ“:
  æ€»æµ‹è¯•æ•°: 15
  é€šè¿‡: 10
  å¤±è´¥: 5
  æˆåŠŸç‡: 66.7%

LLM å¼•æ“:
  æ€»æµ‹è¯•æ•°: 15
  é€šè¿‡: 14
  å¤±è´¥: 1
  æˆåŠŸç‡: 93.3%

è¯¦ç»†æµ‹è¯•ç»“æœ:
======================================================================

æµ‹è¯• 1: åŸºç¡€æ“ä½œ
è¾“å…¥: åœ¨æ‰‹æœºAä¸Šæ‰“å¼€å¾®ä¿¡
----------------------------------------------------------------------
è§„åˆ™å¼•æ“: âœ… é€šè¿‡
  ç½®ä¿¡åº¦: 0.80
  å¤„ç†æ—¶é—´: 0.023ç§’
LLM å¼•æ“: âœ… é€šè¿‡
  ç½®ä¿¡åº¦: 0.95
  å¤„ç†æ—¶é—´: 0.856ç§’

...
```

---

## ğŸ® Web ç•Œé¢ï¼ˆå¯é€‰ï¼‰

**è®¿é—® Gateway Dashboardï¼š**

```
http://localhost:8000
```

**API æ–‡æ¡£ï¼ˆSwaggerï¼‰ï¼š**

```
http://localhost:8000/docs
```

---

## ğŸ”§ é…ç½®è®¾å¤‡

**å¦‚æœè¦å®é™…æ‰§è¡Œä»»åŠ¡ï¼ˆä¸åªæ˜¯æµ‹è¯• NLUï¼‰ï¼Œéœ€è¦æ³¨å†Œè®¾å¤‡ï¼š**

```bash
# æ³¨å†Œæ‰‹æœº A
curl -X POST http://localhost:8000/api/devices/register ^
  -H "Content-Type: application/json" ^
  -d "{\"device_id\": \"phone_a\", \"device_name\": \"æ‰‹æœºA\", \"device_type\": \"android\", \"aliases\": [\"æ‰‹æœºA\", \"æˆ‘çš„æ‰‹æœº\"], \"capabilities\": [\"wechat\", \"qq\"], \"ip_address\": \"192.168.1.100\"}"

# æŸ¥çœ‹å·²æ³¨å†Œçš„è®¾å¤‡
curl http://localhost:8000/api/devices
```

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | è§„åˆ™å¼•æ“ | LLM å¼•æ“ |
|------|---------|---------|
| ç®€å•æŒ‡ä»¤ | âœ… å¿«é€Ÿï¼ˆ<0.1ç§’ï¼‰ | âš ï¸ è¾ƒæ…¢ï¼ˆ0.5-2ç§’ï¼‰ |
| å¤æ‚æŒ‡ä»¤ | âŒ è¯†åˆ«ä¸å‡† | âœ… å‡†ç¡®è¯†åˆ« |
| å¤šè®¾å¤‡å¹¶è¡Œ | âš ï¸ éƒ¨åˆ†æ”¯æŒ | âœ… å®Œå…¨æ”¯æŒ |
| ä»»åŠ¡åˆ†è§£ | âŒ ä¸æ”¯æŒ | âœ… è‡ªåŠ¨åˆ†è§£ |
| ä¸Šä¸‹æ–‡ç†è§£ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ |

**æ¨èç­–ç•¥ï¼š** ç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨æ··åˆç­–ç•¥ï¼ˆç®€å•ç”¨è§„åˆ™ï¼Œå¤æ‚ç”¨ LLMï¼‰

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: Ollama å¯åŠ¨å¤±è´¥

**A:** æ£€æŸ¥æ˜¯å¦å·²å®‰è£…ï¼š
```bash
ollama --version
```

å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œä» https://ollama.com/download ä¸‹è½½ã€‚

---

### Q2: æ¨¡å‹ä¸‹è½½æ…¢

**A:** Qwen2.5 æ¨¡å‹çº¦ 4.7GBï¼Œé¦–æ¬¡ä¸‹è½½éœ€è¦æ—¶é—´ã€‚å¯ä»¥ï¼š
1. ä½¿ç”¨å›½å†…é•œåƒï¼ˆå¦‚æœæœ‰ï¼‰
2. æˆ–è€…ä½¿ç”¨äº‘ç«¯ APIï¼ˆGroqã€DeepSeekï¼‰

---

### Q3: NLU è¯†åˆ«ä¸å‡†ç¡®

**A:** 
1. ç¡®ä¿ Ollama æ­£åœ¨è¿è¡Œ
2. ç¡®ä¿æ¨¡å‹å·²ä¸‹è½½ï¼ˆ`ollama list`ï¼‰
3. å°è¯•æ›´å…·ä½“çš„æŒ‡ä»¤
4. æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šä¸­çš„é”™è¯¯ä¿¡æ¯

---

## ğŸ“š ä¸‹ä¸€æ­¥

1. **æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ï¼š** `ENHANCED_NLU_DEPLOYMENT_GUIDE.md`
2. **æŸ¥çœ‹ NLU åˆ†æï¼š** `NLU_ANALYSIS.md`
3. **é›†æˆåˆ° Android Agent**
4. **é›†æˆåˆ° Windows Client**
5. **éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ**

---

## ğŸ‰ æˆåŠŸï¼

å¦‚æœæ‚¨èƒ½çœ‹åˆ°æµ‹è¯•é€šè¿‡ï¼Œæ­å–œï¼å¢å¼ºç‰ˆ NLU v2.0 å·²ç»æˆåŠŸè¿è¡Œã€‚

**ç°åœ¨æ‚¨å¯ä»¥ï¼š**
- âœ… ç²¾ç¡®è¯†åˆ«å¤šä¸ªè®¾å¤‡ï¼ˆæ‰‹æœº Aã€æ‰‹æœº Bã€å¹³æ¿ã€ç”µè„‘ï¼‰
- âœ… è‡ªåŠ¨åˆ†è§£å¤æ‚ä»»åŠ¡
- âœ… æ”¯æŒå¤šè®¾å¤‡å¹¶è¡Œæ“æ§
- âœ… ä½¿ç”¨è‡ªç„¶è¯­è¨€æ§åˆ¶æ‰€æœ‰è®¾å¤‡

**ä¸‹ä¸€æ­¥ï¼š** å°† NLU é›†æˆåˆ° Android Agent å’Œ Windows Clientï¼Œå®ç°å®Œæ•´çš„å¤šè®¾å¤‡æ“æ§ï¼

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** 1.0  
**æœ€åæ›´æ–°ï¼š** 2026-01-22  
**ä½œè€…ï¼š** Manus AI
