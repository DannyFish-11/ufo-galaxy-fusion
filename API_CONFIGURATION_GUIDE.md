# ğŸ”‘ UFOÂ³ Galaxy v2.0 - API é…ç½®æŒ‡å—

## âœ… å·²é…ç½®çš„ API Keys

æ‰€æœ‰ 10 ä¸ª API æä¾›å•†å·²å®Œæˆé…ç½®ï¼Œå¯ä»¥ç«‹å³ä½¿ç”¨ï¼

---

## ğŸ“Š API æä¾›å•†æ¸…å•

### 1. Groq â­â­â­â­â­
**çŠ¶æ€:** âœ… å·²é…ç½®  
**ç±»å‹:** å…è´¹  
**ç‰¹ç‚¹:** è¶…å¿«é€Ÿåº¦ï¼ˆLPU åŠ é€Ÿï¼‰  
**æ¨¡å‹:** Llama 3.3 70B, Mixtral 8x7B  
**ç”¨é€”:** å¿«é€Ÿå“åº”ã€æ—¥å¸¸å¯¹è¯  

### 2. Together AI â­â­â­â­â­
**çŠ¶æ€:** âœ… å·²é…ç½®  
**ç±»å‹:** ä½æˆæœ¬  
**ç‰¹ç‚¹:** å¤šç§å¼€æºæ¨¡å‹  
**æ¨¡å‹:** Llama 3.1 405B, Qwen2.5 72B, DeepSeek-V3  
**ç”¨é€”:** é€šç”¨ä»»åŠ¡ã€ä»£ç ç”Ÿæˆ  

### 3. æ™ºè°± AI (GLM) â­â­â­â­â­
**çŠ¶æ€:** âœ… å·²é…ç½®  
**ç±»å‹:** ä½æˆæœ¬  
**ç‰¹ç‚¹:** ä¸­æ–‡èƒ½åŠ›æœ€å¼º  
**æ¨¡å‹:** GLM-4-Flash, GLM-4-Plus  
**ç”¨é€”:** ä¸­æ–‡å¯¹è¯ã€ä¸­æ–‡å†™ä½œ  

### 4. Perplexity â­â­â­â­â­
**çŠ¶æ€:** âœ… å·²é…ç½®  
**ç±»å‹:** ä¸­ç­‰æˆæœ¬  
**ç‰¹ç‚¹:** å®æ—¶è”ç½‘æœç´¢ + å¼•ç”¨æ¥æº  
**æ¨¡å‹:** Sonar-Pro, Sonar-Reasoning  
**ç”¨é€”:** å®æ—¶ä¿¡æ¯æŸ¥è¯¢ã€ç ”ç©¶æŠ¥å‘Š  

### 5. OpenRouter â­â­â­â­â˜†
**çŠ¶æ€:** âœ… å·²é…ç½®  
**ç±»å‹:** èšåˆå¹³å°  
**ç‰¹ç‚¹:** ä¸€ä¸ª API è®¿é—®æ‰€æœ‰æ¨¡å‹  
**æ¨¡å‹:** GPT-4, Claude, Gemini ç­‰  
**ç”¨é€”:** è®¿é—®é«˜çº§æ¨¡å‹ã€æ¨¡å‹å¯¹æ¯”  

### 6. Claude â­â­â­â­â­
**çŠ¶æ€:** âœ… å·²é…ç½®  
**ç±»å‹:** é«˜æˆæœ¬  
**ç‰¹ç‚¹:** æœ€å¼ºæ¨ç†èƒ½åŠ› + é•¿ä¸Šä¸‹æ–‡  
**æ¨¡å‹:** Claude 3.5 Sonnet  
**ç”¨é€”:** å¤æ‚æ¨ç†ã€ä»£ç é‡æ„ã€é•¿æ–‡æ¡£åˆ†æ  

### 7. æœ¬åœ° LLM (Ollama) â­â­â­â­â­
**çŠ¶æ€:** âœ… å·²é…ç½®  
**ç±»å‹:** å…è´¹  
**ç‰¹ç‚¹:** æœ¬åœ°æ¨ç†ã€é›¶æˆæœ¬ã€éšç§ä¿æŠ¤  
**æ¨¡å‹:** Qwen2.5, DeepSeek-Coder  
**ç”¨é€”:** æ—¥å¸¸ä»»åŠ¡ã€ä»£ç ç”Ÿæˆ  

### 8. Brave Search â­â­â­â­â˜†
**çŠ¶æ€:** âœ… å·²é…ç½®  
**ç±»å‹:** å…è´¹  
**ç‰¹ç‚¹:** å®æ—¶ç½‘é¡µæœç´¢ã€æ— å¹¿å‘Š  
**ç”¨é€”:** å®æ—¶ä¿¡æ¯æŸ¥è¯¢ã€äº‹å®æ ¸æŸ¥  

### 9. OpenWeather â­â­â­â­â˜†
**çŠ¶æ€:** âœ… å·²é…ç½®  
**ç±»å‹:** å…è´¹  
**ç‰¹ç‚¹:** å¤©æ°”æŸ¥è¯¢  
**ç”¨é€”:** å¤©æ°”é¢„æŠ¥ã€æ—…è¡Œè§„åˆ’  

### 10. Pixverse â­â­â­â­â˜†
**çŠ¶æ€:** âœ… å·²é…ç½®  
**ç±»å‹:** æŒ‰éœ€ä»˜è´¹  
**ç‰¹ç‚¹:** æ–‡æœ¬/å›¾ç‰‡ç”Ÿæˆè§†é¢‘  
**ç”¨é€”:** è§†é¢‘å†…å®¹åˆ›ä½œã€è¥é”€ç´ æ  

---

## ğŸ¯ æ™ºèƒ½è·¯ç”±ç­–ç•¥

ç³»ç»Ÿå·²é…ç½®ä¸º **cost_optimized**ï¼ˆæˆæœ¬ä¼˜åŒ–ï¼‰æ¨¡å¼ï¼š

```
ç”¨æˆ·è¯·æ±‚
    â†“
Galaxy Gateway
    â†“
æ™ºèƒ½è·¯ç”±åˆ¤æ–­
    â”œâ”€> ç®€å•ä»»åŠ¡ â†’ æœ¬åœ° LLM (å…è´¹)
    â”œâ”€> ä»£ç ä»»åŠ¡ â†’ DeepSeek-Coder (å…è´¹)
    â”œâ”€> ä¸­æ–‡ä»»åŠ¡ â†’ æ™ºè°± AI (ä½æˆæœ¬)
    â”œâ”€> å®æ—¶ä¿¡æ¯ â†’ Perplexity (ä¸­ç­‰)
    â”œâ”€> å¿«é€Ÿå“åº” â†’ Groq (å…è´¹)
    â””â”€> å¤æ‚æ¨ç† â†’ Claude (é«˜è´¨é‡)
```

---

## ğŸ’° æˆæœ¬ä¼°ç®—

### æ—¥å¸¸ä½¿ç”¨ (1000 æ¬¡/å¤©)

| åœºæ™¯ | æä¾›å•† | æˆæœ¬/å¤© | æˆæœ¬/æœˆ |
|------|--------|---------|---------|
| æ—¥å¸¸å¯¹è¯ | æœ¬åœ° LLM | $0 | $0 |
| ä»£ç ç”Ÿæˆ | DeepSeek-Coder | $0 | $0 |
| ä¸­æ–‡ä»»åŠ¡ | æ™ºè°± AI | $0.1 | $3 |
| å®æ—¶ä¿¡æ¯ | Perplexity | $1-5 | $30-150 |
| å¿«é€Ÿå“åº” | Groq | $0 | $0 |
| **æ€»è®¡** | **æ··åˆä½¿ç”¨** | **$1-6** | **$30-180** |

### ä¼˜åŒ–å vs ä¼˜åŒ–å‰

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | èŠ‚çœ |
|------|--------|--------|------|
| æ—¥å¸¸ä»»åŠ¡ | $10/å¤© | $0/å¤© | **100%** |
| ä¸­æ–‡ä»»åŠ¡ | $10/å¤© | $0.1/å¤© | **99%** |
| å®æ—¶ä¿¡æ¯ | $5/å¤© | $1-5/å¤© | **0-80%** |
| å¤æ‚æ¨ç† | $20/å¤© | $5/å¤© | **75%** |
| **æ€»è®¡** | **$45/å¤©** | **$6-10/å¤©** | **78-87%** |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. éªŒè¯é…ç½®
```bash
cd /home/ubuntu/ufo-galaxy-api-integration

# æ£€æŸ¥ .env æ–‡ä»¶
cat .env

# æ‰€æœ‰ API Keys åº”è¯¥å·²ç»å¡«å†™å®Œæˆ
```

### 2. å¯åŠ¨ç³»ç»Ÿ
```bash
# å¯åŠ¨æ ¸å¿ƒèŠ‚ç‚¹
python galaxy_launcher.py --mode core

# æˆ–å¯åŠ¨æ‰€æœ‰èŠ‚ç‚¹
python galaxy_launcher.py --mode all
```

### 3. æµ‹è¯• API
```bash
# æµ‹è¯• One-API
curl http://localhost:8001/health

# æµ‹è¯• Galaxy Gateway
curl http://localhost:8888/health

# æµ‹è¯• LLM è°ƒç”¨
curl -X POST http://localhost:8888/api/llm/chat \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [{"role": "user", "content": "ä½ å¥½"}],
    "model": "auto"
  }'
```

### 4. è®¿é—® Dashboard
```
æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:8000
```

---

## ğŸ“‹ API è°ƒç”¨ç¤ºä¾‹

### 1. ä½¿ç”¨ Galaxy Gatewayï¼ˆæ¨èï¼‰

**è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ¨¡å‹ï¼š**
```python
import httpx

async def chat(message: str):
    async with httpx.AsyncClient() as client:
        response = await client.post(
            "http://localhost:8888/api/llm/chat",
            json={
                "messages": [{"role": "user", "content": message}],
                "model": "auto"  # è‡ªåŠ¨é€‰æ‹©
            }
        )
        return response.json()

# ä½¿ç”¨
result = await chat("å¸®æˆ‘å†™ä¸€ä¸ª Python å‡½æ•°")
```

**æŒ‡å®šæä¾›å•†ï¼š**
```python
# ä½¿ç”¨ Groqï¼ˆå…è´¹ï¼Œå¿«é€Ÿï¼‰
result = await chat_with_provider("groq", "å¿«é€Ÿå›ç­”é—®é¢˜")

# ä½¿ç”¨æ™ºè°± AIï¼ˆä¸­æ–‡ä¼˜ç§€ï¼‰
result = await chat_with_provider("zhipu", "å†™ä¸€ç¯‡ä¸­æ–‡æ–‡ç« ")

# ä½¿ç”¨ Perplexityï¼ˆå®æ—¶æœç´¢ï¼‰
result = await chat_with_provider("perplexity", "ä»Šå¤©çš„æ–°é—»")

# ä½¿ç”¨ Claudeï¼ˆæœ€å¼ºæ¨ç†ï¼‰
result = await chat_with_provider("claude", "å¤æ‚æ¨ç†ä»»åŠ¡")
```

### 2. ä½¿ç”¨ One-API

```python
import httpx

async def one_api_chat(message: str, provider: str = "auto"):
    async with httpx.AsyncClient() as client:
        response = await client.post(
            "http://localhost:8001/v1/chat/completions",
            json={
                "model": f"{provider}/auto",
                "messages": [{"role": "user", "content": message}]
            }
        )
        return response.json()
```

### 3. è°ƒç”¨ç‰¹å®šèŠ‚ç‚¹

```python
# è°ƒç”¨ Node 83 (æ–°é—»èšåˆ)
async def get_news(topic: str):
    async with httpx.AsyncClient() as client:
        response = await client.post(
            "http://localhost:8888/api/node/node_83/invoke",
            json={
                "method": "search_news",
                "params": {"query": topic, "limit": 10}
            }
        )
        return response.json()

# è°ƒç”¨ Node 84 (è‚¡ç¥¨è¿½è¸ª)
async def get_stock(symbol: str):
    async with httpx.AsyncClient() as client:
        response = await client.post(
            "http://localhost:8888/api/node/node_84/invoke",
            json={
                "method": "get_quote",
                "params": {"symbol": symbol}
            }
        )
        return response.json()
```

---

## ğŸ”§ é«˜çº§é…ç½®

### ä¿®æ”¹è·¯ç”±ç­–ç•¥

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```bash
# æˆæœ¬ä¼˜å…ˆï¼ˆé»˜è®¤ï¼‰
ROUTING_STRATEGY=cost_optimized

# æœ¬åœ°ä¼˜å…ˆ
ROUTING_STRATEGY=local_first

# äº‘ç«¯ä¼˜å…ˆï¼ˆé«˜è´¨é‡ï¼‰
ROUTING_STRATEGY=cloud_first

# è´¨é‡ä¼˜å…ˆï¼ˆæœ€å¼ºæ¨¡å‹ï¼‰
ROUTING_STRATEGY=quality_first
```

### è‡ªå®šä¹‰æ¨¡å‹æ˜ å°„

ç¼–è¾‘ `shared/llm_client.py`ï¼š

```python
MODEL_MAPPING = {
    "code": "local/deepseek-coder",      # ä»£ç ä»»åŠ¡
    "chinese": "zhipu/glm-4-flash",      # ä¸­æ–‡ä»»åŠ¡
    "search": "perplexity/sonar-pro",    # å®æ—¶æœç´¢
    "reasoning": "claude/claude-3.5",    # å¤æ‚æ¨ç†
    "fast": "groq/llama-3.3-70b",        # å¿«é€Ÿå“åº”
    "default": "local/qwen2.5-7b"        # é»˜è®¤
}
```

---

## âœ… éªŒæ”¶æ¸…å•

- [x] 10 ä¸ª API æä¾›å•†å…¨éƒ¨é…ç½®å®Œæˆ
- [x] .env æ–‡ä»¶å·²åˆ›å»º
- [x] API Keys å·²å¡«å†™
- [x] æ™ºèƒ½è·¯ç”±å·²é…ç½®
- [x] æ–‡æ¡£å·²å®Œæˆ
- [x] å¯ä»¥ç«‹å³ä½¿ç”¨

---

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æ£€æŸ¥ .env æ–‡ä»¶ä¸­çš„ API Keys æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ç›¸å…³æœåŠ¡ï¼ˆRedis, Memos, Ollamaï¼‰å·²å¯åŠ¨
3. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š`logs/galaxy.log`
4. è®¿é—® Dashboard æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€

---

**é…ç½®å®Œæˆæ—¶é—´:** 2026-01-22  
**ç³»ç»Ÿç‰ˆæœ¬:** UFOÂ³ Galaxy v2.0  
**çŠ¶æ€:** âœ… ç”Ÿäº§å°±ç»ª
